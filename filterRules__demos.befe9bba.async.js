"use strict";(self.webpackChunkdt_react_component=self.webpackChunkdt_react_component||[]).push([[1268],{77625:function(Y,M,n){n.r(M);var j=n(90554),C=n.n(j),U=n(28870),O=n(48651),B=n.n(O),b=n(86516),x=n.n(b),f=n(83345),z=n.n(f),y=n(50425),W=n(79685),S=n(19576),g=n(52368),o=n(63342),A=function(t){var E=t.rowValues.input,l=t.rowKey,r=t.onChange;return(0,o.jsx)(y.default,{value:E,onChange:function(c){return r==null?void 0:r(l,{input:c.target.value})}})};M.default=function(){var u=(0,W.useState)(g.Bq),t=x()(u,2),E=t[0],l=t[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(S.ZP,{component:function(a){return(0,o.jsx)(A,B()({},a))},value:E,onChange:function(a){return l(a)},initValues:g.jv}),(0,o.jsx)(U.default,{onClick:function(){return console.log(E)},children:"\u63A7\u5236\u53F0\u67E5\u770B\u6570\u636E"})]})}},1809:function(Y,M,n){n.r(M);var j=n(48651),C=n.n(j),U=n(90554),O=n.n(U),B=n(28870),b=n(99764),x=n.n(b),f=n(9923),z=n(86516),y=n.n(z),W=n(83345),S=n.n(W),g=n(50425),o=n(79685),A=n(19576),u=n(52368),t=n(63342),E=function(r){var a=r.rowValues.input,c=r.rowKey,D=r.disabled,K=r.onChange;return(0,t.jsx)(g.default,{value:a,onChange:function(H){return K==null?void 0:K(c,{input:H.target.value})},disabled:D})};M.default=function(){var l=f.Z.useForm(),r=y()(l,1),a=r[0],c=(0,o.useState)(!1),D=y()(c,2),K=D[0],F=D[1];return(0,o.useEffect)(function(){a.setFieldsValue({condition:u.Bq})},[]),(0,t.jsxs)(f.Z,{form:a,children:[(0,t.jsxs)(B.default,{style:{marginBottom:16},onClick:function(){return F(!K)},children:[K?"\u7F16\u8F91":"\u67E5\u770B","\u72B6\u6001"]}),(0,t.jsx)(f.Z.Item,{name:"condition",children:(0,t.jsx)(A.ZP,{component:function(p){return(0,t.jsx)(E,C()({},p))},disabled:K,initValues:u.jv})})]})}},16358:function(Y,M,n){n.r(M);var j=n(48651),C=n.n(j),U=n(88289),O=n.n(U),B=n(4125),b=n(73735),x=n.n(b),f=n(82549),z=n(86516),y=n.n(z),W=n(83345),S=n.n(W),g=n(50425),o=n(79685),A=n(19576),u=n(52368),t=n(63342),E=function(r){var a=r.rowValues.input,c=r.rowKey,D=r.onChange;return(0,t.jsx)(g.default,{value:a,onChange:function(F){return D==null?void 0:D(c,{input:F.target.value})}})};M.default=function(){var l=(0,o.useState)(u.Bq),r=y()(l,2),a=r[0],c=r[1],D=(0,o.useState)(2),K=y()(D,2),F=K[0],H=K[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(B.default,{style:{marginBottom:16},children:[(0,t.jsx)("span",{children:"\u6700\u5927\u5B50\u8282\u70B9\u4E2A\u6570:"}),(0,t.jsx)(f.Z,{value:F,min:0,precision:0,onChange:function(s){return H(s!=null?s:0)}})]}),(0,t.jsx)(A.ZP,{component:function(s){return(0,t.jsx)(E,C()({},s))},value:a,maxSize:F,onChange:function(s){return c(s)},initValues:u.jv})]})}},51801:function(Y,M,n){n.r(M);var j=n(48651),C=n.n(j),U=n(67822),O=n.n(U),B=n(39153),b=n(86516),x=n.n(b),f=n(83345),z=n.n(f),y=n(50425),W=n(79685),S=n(19576),g=n(52368),o=n(63342),A=function(t){var E=t.rowValues.input,l=t.rowKey,r=t.onChange;return(0,o.jsx)(y.default,{value:E,onChange:function(c){return r==null?void 0:r(l,{input:c.target.value})}})};M.default=function(){var u=(0,W.useState)(g.AD),t=x()(u,2),E=t[0],l=t[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(B.default,{message:"\u53EF\u4EE5\u901A\u8FC7\u64CD\u4F5C\u6309\u94AE\u589E\u52A0\u5220\u9664\u6570\u636E\uFF0C\u5207\u6362\u4E14\u6216\u8282\u70B9\u5185\u5BB9",style:{marginBottom:16}}),(0,o.jsx)(S.ZP,{component:function(a){return(0,o.jsx)(A,C()({},a))},value:E,onChange:function(a){return l(a)},initValues:g.jv})]})}},95789:function(Y,M,n){n.r(M);var j=n(22786),C=n.n(j),U=n(46299),O=n.n(U),B=n(48651),b=n.n(B),x=n(90554),f=n.n(x),z=n(28870),y=n(86516),W=n.n(y),S=n(99764),g=n.n(S),o=n(9923),A=n(83345),u=n.n(A),t=n(50425),E=n(70300),l=n.n(E),r=n(79685),a=n(19576),c=n(52368),D=n(63342),K=function(H){var p=H.name;return(0,D.jsx)(o.Z.Item,{name:["condition"].concat(l()(p),["input"]),children:(0,D.jsx)(t.default,{})})};M.default=function(){var F=o.Z.useForm(),H=W()(F,1),p=H[0];return(0,D.jsxs)(o.Z,{form:p,children:[(0,D.jsx)(z.default,{onClick:function(){return p.setFieldsValue({condition:c.Bq})},style:{marginBottom:16},children:"\u6DFB\u52A0\u6570\u636E"}),(0,D.jsx)(o.Z.Item,{name:"condition",children:(0,D.jsx)(a.ZP,{component:function(V){return(0,D.jsx)(K,b()({},V))},notEmpty:{data:!1},initValues:c.jv})}),(0,D.jsx)(z.default,{onClick:O()(C()().mark(function s(){return C()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.t0=console,T.next=3,p.validateFields();case 3:return T.t1=T.sent,T.abrupt("return",T.t0.log.call(T.t0,T.t1));case 5:case"end":return T.stop()}},s)})),children:"\u63A7\u5236\u53F0\u67E5\u770B\u6570\u636E"})]})}},94034:function(Y,M,n){n.r(M);var j=n(48651),C=n.n(j),U=n(67822),O=n.n(U),B=n(39153),b=n(86516),x=n.n(b),f=n(83345),z=n.n(f),y=n(50425),W=n(79685),S=n(19576),g=n(52368),o=n(63342),A=function(t){var E=t.rowValues.input,l=t.disabled,r=t.rowKey,a=t.onChange;return(0,o.jsx)(y.default,{value:E,disabled:l,onChange:function(D){return a==null?void 0:a(r,{input:D.target.value})}})};M.default=function(){var u=(0,W.useState)(g.jN),t=x()(u,2),E=t[0],l=t[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(B.default,{message:"\u9002\u7528\u4E8E\u90E8\u5206\u6570\u636E\u7981\u7528\u4E14\u53EF\u4EE5\u7F16\u8F91\u5176\u4ED6\u6570\u636E\u3002\u5E38\u89C1\u4E1A\u52A1\u60C5\u666F\uFF1A\u4E0A\u4E00\u6B21\u4FDD\u5B58\u7684\u6570\u636E\u4E0D\u53EF\u4FEE\u6539\uFF0C\u4F46\u9700\u8981\u5728\u5F53\u524D\u57FA\u7840\u4E0A\u7EE7\u7EED\u65B0\u589E\u6570\u636E\u3002",style:{marginBottom:16}}),(0,o.jsx)(S.ZP,{component:function(a){return(0,o.jsx)(A,C()({},a))},value:E,onChange:function(a){return l(a)},initValues:g.jv})]})}},52368:function(Y,M,n){n.d(M,{AD:function(){return f},Bq:function(){return b},jN:function(){return x},jv:function(){return B}});var j=n(48651),C=n.n(j),U=n(50576),O=n.n(U),B={input:""},b={key:O()(),level:0,rowValues:C()({},B)},x={key:O()(),level:0,type:1,children:[{rowValues:{input:""},disabled:!0,key:O()(),level:1},{key:O()(),type:1,level:2,disabled:!0,children:[{rowValues:{input:""},key:O()(),level:2},{key:O()(),rowValues:{input:""},level:2}]}]},f={key:O()(),level:1,type:1,children:[{rowValues:{input:""},key:O()(),level:1},{key:O()(),type:2,level:2,children:[{key:O()(),level:2,rowValues:{input:""}},{key:O()(),rowValues:{input:""},level:2}]}]}},19576:function(Y,M,n){n.d(M,{de:function(){return c},NZ:function(){return D},ZP:function(){return H}});var j=n(48651),C=n.n(j),U=n(71089),O=n(75020),B=n(5677),b=n.n(B),x=n(79685),f=n(25043),z=n(50576),y=n.n(z),W=n(70300),S=n.n(W),g=n(71074),o=n(68591),A=n.n(o),u=n(63342),t=32,E=16,l=new WeakMap,r=function(s){var V=s.value,T=s.disabled,an=s.maxLevel,X=s.maxSize,k=s.className,on=s.style,ln=s.component,_n=s.onAddCondition,dn=s.onDeleteCondition,rn=s.onChangeCondition,en=s.onChangeRowValues,nn=function(_){return(_==null?void 0:_.type)&&[c.AND,c.OR].includes(_==null?void 0:_.type)},I=function J(_,$){var Z=$||!!_.disabled;if(!(_!=null&&_.children))return l.set(_,{height:t+E,lineHeight:t});_.children.map(function(G){return J(G,Z)});var N=!_.children.some(nn),L=nn(_.children[0]);if(Z){var R=_.children.reduce(function(G,q){return G+l.get(q).height},0),v,Q;if(N)v=R-t-E;else{var tn,sn=_.children[0],mn=_.children[_.children.length-1],cn=l.get(sn).height-w(_,!0),En=nn(mn),vn=w(_,!1),Dn=l.get(mn).height-E-vn;Q=En?vn:t/2,v=cn+((tn=_.children)===null||tn===void 0?void 0:tn.slice(1,-1).reduce(function(G,q){return G+l.get(q).height},0))+Dn}l.set(_,{bottom:Q,lineHeight:v,height:R})}else{var P=_.children.reduce(function(G,q){return G+l.get(q).height},t),e;if(N){var i=l.get(_.children[0]).height-E,d=t;e=P-i/2-d/2}else{var h,m=L?l.get(_.children[0]).lineHeight/2+t/2:t/2+E;e=m+((h=_.children)===null||h===void 0?void 0:h.slice(1).reduce(function(G,q){return G+l.get(q).height},t/2))}l.set(_,{height:P,lineHeight:e})}return _},w=function J(_,$){var Z,N,L,P=$?_==null||(Z=_.children)===null||Z===void 0?void 0:Z[0]:_==null||(N=_.children)===null||N===void 0?void 0:N[(_==null||(L=_.children)===null||L===void 0?void 0:L.length)-1];if(!P)return t/2;var e=nn(P);if(e){var i;return((i=l.get(P))===null||i===void 0?void 0:i.lineHeight)/2+J(P,$)}return t/2},un=function J(_,$,Z){var N,L=Z||!!_.disabled;if(_!=null&&(N=_.children)!==null&&N!==void 0&&N.length){var P,e=function(R){var v=S()($);return v.push.apply(v,["children",R]),v},i=l.get(_),d=i.lineHeight,h=i.bottom;return(0,u.jsxs)("div",{className:A()("dtc-ruleController__condition",{"dtc-ruleController__condition--active":_.children.length>1}),children:[(0,u.jsxs)("div",{className:A()("condition__box",{disabled:L}),style:{height:d,bottom:h!=null?h:E},children:[(0,u.jsx)("span",{className:A()("condition__box--name",{disabled:L}),onClick:function(){return!L&&rn(_.key,_==null?void 0:_.type)},children:D[_==null?void 0:_.type]}),_.children.length>1&&(0,u.jsx)("span",{className:A()("condition__box--line",{disabled:Z})})]}),_.children.map(function(m,R){return J(m,e(R),L)}),!L&&(0,u.jsxs)("div",{className:"condition__add",children:[(0,u.jsx)("span",{className:"condition__add--line"}),(0,u.jsx)(g.PlusCircleOutlined,{className:A()("condition__add--icon",(_==null||(P=_.children)===null||P===void 0?void 0:P.length)>=X&&"condition__add--icon--disabled"),onClick:function(){_!=null&&_.children&&_.children.length>=X||_n({key:_.key,isOut:!0})},"data-testid":"icon-plus"})]})]},_.key)}return(0,u.jsxs)("div",{className:"dtc-ruleController__item",children:[(V==null?void 0:V.children)&&(0,u.jsx)("span",{className:A()("dtc-ruleController__item--line",{disabled:Z})}),(0,u.jsx)("div",{className:"dtc-ruleController__item--component",children:ln({rowKey:_.key,disabled:L,name:[].concat(S()($),["rowValues"]),rowValues:_.rowValues,onChange:en})}),!L&&(0,u.jsxs)("div",{className:"dtc-ruleController__item--operation",children:[_.level===an?null:(0,u.jsx)(g.PlusCircleOutlined,{className:"icon",onClick:function(){return _n({key:_.key})},"data-testid":"icon-plus"}),(0,u.jsx)(g.MinusCircleOutlined,{className:"icon",onClick:function(){return dn(_.key)},"data-testid":"icon-minus"})]})]},_.key)};return V?(I(V,!!T),(0,u.jsx)("div",{className:A()("dtc-ruleController",k),style:on,children:un(V,[],!!T||!!V.disabled)})):null},a,c=function(p){return p[p.AND=1]="AND",p[p.OR=2]="OR",p}({}),D=(a={},b()(a,c.AND,"\u4E14"),b()(a,c.OR,"\u6216"),a);function K(p){return p.disabled===!0}var F=function(s){var V=s.component,T=s.disabled,an=T===void 0?!1:T,X=s.value,k=!K(s)&&s,on=k.maxLevel,ln=on===void 0?5:on,_n=k.maxSize,dn=_n===void 0?100:_n,rn=k.notEmpty,en=rn===void 0?{data:!0,message:"\u5FC5\u987B\u6709\u4E00\u6761\u6570\u636E"}:rn,nn=k.initValues,I=k.onChange,w=function P(e,i,d){var h,m=e;if(m.key===i)return m;if(!((h=m.children)!==null&&h!==void 0&&h.length))return null;for(var R=0;R<m.children.length;R++){var v=m.children[R];if(v.key===i)return d?v:m;var Q=P(v,i,d);if(Q)return Q}},un=function(e){var i=(0,f.Z)(X),d=w(i,e.key,e.isOut);J(d,e,nn),I==null||I(i)},J=function(e,i,d){var h=i.key;if(i.isOut)return e.children.push(Object.assign({},{rowValues:d},{key:y()(),level:e.level}));var m=e==null?void 0:e.children;if(!m){var R={key:e.key,level:e.level+1,type:c.AND,children:[{rowValues:e.rowValues,key:y()(),level:(e==null?void 0:e.level)+1},{rowValues:d,key:y()(),level:(e==null?void 0:e.level)+1}]};delete e.rowValues,Object.assign(e,R);return}for(var v=0;v<m.length;v+=1)m[v].key===h&&(e==null?void 0:e.level)<=ln&&(m[v]={key:m[v].key,type:c.AND,level:(e==null?void 0:e.level)+1,children:[Object.assign({},m[v],{key:y()(),level:(e==null?void 0:e.level)+1}),Object.assign({key:y()(),rowValues:d,level:(e==null?void 0:e.level)+1})]})},_=function(e){var i=(0,f.Z)(X),d=w(i,e,!1);if(en.data&&!(d!=null&&d.children))return O.default.info(en.message);if(!en.data&&!(d!=null&&d.children))return I==null?void 0:I(void 0);$(d,e),I==null||I(i)},$=function(e,i){var d,h,m,R,v=e;if(v.children=(d=v)===null||d===void 0||(h=d.children)===null||h===void 0?void 0:h.filter(function(sn){return sn.key!==i}),((m=v)===null||m===void 0||(R=m.children)===null||R===void 0?void 0:R.length)===1){var Q=Z(v.children[0]),tn=v.key;delete v.children,delete v.type,v=Object.assign(v,C()(C()({},Q),{},{key:tn,level:Q.level}))}},Z=function P(e){var i;e.children&&(i=e.children.map(function(h){return P(h)}));var d=C()(C()({},e),{},{children:i,level:(e==null?void 0:e.level)-1});return d},N=function(e,i){var d=(0,f.Z)(X),h=w(d,e,!0);h.type=i===c.AND?c.OR:c.AND,I==null||I(d)},L=function(e,i){var d,h=(0,f.Z)(X),m=w(h,e,!0);m.rowValues=C()(C()({},(d=m.rowValues)!==null&&d!==void 0?d:{}),i),I==null||I(h)};return(0,u.jsx)(r,{maxLevel:ln,maxSize:dn,disabled:an,value:X,component:V,onAddCondition:un,onDeleteCondition:_,onChangeCondition:N,onChangeRowValues:L})},H=F}}]);
