"use strict";(self.webpackChunkdt_react_component=self.webpackChunkdt_react_component||[]).push([[1268],{16235:function(Y,D,n){n.r(D);var K=n(58383),C=n.n(K),g=n(43249),h=n(57213),I=n.n(h),B=n(54306),x=n.n(B),A=n(90650),z=n.n(A),T=n(35031),U=n(50959),S=n(41566),b=n(67549),l=n(11527),W=function(t){var r=t.rowValues.input,E=t.rowKey,o=t.onChange;return(0,l.jsx)(T.default,{value:r,onChange:function(f){return o==null?void 0:o(E,{input:f.target.value})}})};D.default=function(){var c=(0,U.useState)(b.Bq),t=x()(c,2),r=t[0],E=t[1];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(S.ZP,{component:function(u){return(0,l.jsx)(W,I()({},u))},value:r,onChange:function(u){return E(u)},initValues:b.jv}),(0,l.jsx)(g.default,{onClick:function(){return console.log(r)},children:"\u63A7\u5236\u53F0\u67E5\u770B\u6570\u636E"})]})}},1376:function(Y,D,n){n.r(D);var K=n(57213),C=n.n(K),g=n(58383),h=n.n(g),I=n(43249),B=n(50707),x=n.n(B),A=n(28785),z=n(54306),T=n.n(z),U=n(90650),S=n.n(U),b=n(35031),l=n(50959),W=n(41566),c=n(67549),t=n(11527),r=function(o){var u=o.rowValues.input,f=o.rowKey,d=o.disabled,R=o.onChange;return(0,t.jsx)(b.default,{value:u,onChange:function(H){return R==null?void 0:R(f,{input:H.target.value})},disabled:d})};D.default=function(){var E=A.Z.useForm(),o=T()(E,1),u=o[0],f=(0,l.useState)(!1),d=T()(f,2),R=d[0],F=d[1];return(0,l.useEffect)(function(){u.setFieldsValue({condition:c.Bq})},[]),(0,t.jsxs)(A.Z,{form:u,children:[(0,t.jsxs)(I.default,{style:{marginBottom:16},onClick:function(){return F(!R)},children:[R?"\u7F16\u8F91":"\u67E5\u770B","\u72B6\u6001"]}),(0,t.jsx)(A.Z.Item,{name:"condition",children:(0,t.jsx)(W.ZP,{component:function(V){return(0,t.jsx)(r,C()({},V))},disabled:R,initValues:c.jv})})]})}},67891:function(Y,D,n){n.r(D);var K=n(57213),C=n.n(K),g=n(86366),h=n.n(g),I=n(17727),B=n(91806),x=n.n(B),A=n(57831),z=n(54306),T=n.n(z),U=n(90650),S=n.n(U),b=n(35031),l=n(50959),W=n(41566),c=n(67549),t=n(11527),r=function(o){var u=o.rowValues.input,f=o.rowKey,d=o.onChange;return(0,t.jsx)(b.default,{value:u,onChange:function(F){return d==null?void 0:d(f,{input:F.target.value})}})};D.default=function(){var E=(0,l.useState)(c.Bq),o=T()(E,2),u=o[0],f=o[1],d=(0,l.useState)(2),R=T()(d,2),F=R[0],H=R[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(I.default,{style:{marginBottom:16},children:[(0,t.jsx)("span",{children:"\u6700\u5927\u5B50\u8282\u70B9\u4E2A\u6570:"}),(0,t.jsx)(A.Z,{value:F,min:0,precision:0,onChange:function(M){return H(M!=null?M:0)}})]}),(0,t.jsx)(W.ZP,{component:function(M){return(0,t.jsx)(r,C()({},M))},value:u,maxSize:F,onChange:function(M){return f(M)},initValues:c.jv})]})}},48914:function(Y,D,n){n.r(D);var K=n(57213),C=n.n(K),g=n(59419),h=n.n(g),I=n(84072),B=n(54306),x=n.n(B),A=n(90650),z=n.n(A),T=n(35031),U=n(50959),S=n(41566),b=n(67549),l=n(11527),W=function(t){var r=t.rowValues.input,E=t.rowKey,o=t.onChange;return(0,l.jsx)(T.default,{value:r,onChange:function(f){return o==null?void 0:o(E,{input:f.target.value})}})};D.default=function(){var c=(0,U.useState)(b.AD),t=x()(c,2),r=t[0],E=t[1];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(I.default,{message:"\u53EF\u4EE5\u901A\u8FC7\u64CD\u4F5C\u6309\u94AE\u589E\u52A0\u5220\u9664\u6570\u636E\uFF0C\u5207\u6362\u4E14\u6216\u8282\u70B9\u5185\u5BB9",style:{marginBottom:16}}),(0,l.jsx)(S.ZP,{component:function(u){return(0,l.jsx)(W,C()({},u))},value:r,onChange:function(u){return E(u)},initValues:b.jv})]})}},93829:function(Y,D,n){n.r(D);var K=n(25359),C=n.n(K),g=n(49811),h=n.n(g),I=n(57213),B=n.n(I),x=n(58383),A=n.n(x),z=n(43249),T=n(54306),U=n.n(T),S=n(50707),b=n.n(S),l=n(28785),W=n(90650),c=n.n(W),t=n(35031),r=n(93525),E=n.n(r),o=n(50959),u=n(41566),f=n(67549),d=n(11527),R=function(H){var V=H.name;return(0,d.jsx)(l.Z.Item,{name:["condition"].concat(E()(V),["input"]),children:(0,d.jsx)(t.default,{})})};D.default=function(){var F=l.Z.useForm(),H=U()(F,1),V=H[0];return(0,d.jsxs)(l.Z,{form:V,children:[(0,d.jsx)(z.default,{onClick:function(){return V.setFieldsValue({condition:f.Bq})},style:{marginBottom:16},children:"\u6DFB\u52A0\u6570\u636E"}),(0,d.jsx)(l.Z.Item,{name:"condition",children:(0,d.jsx)(u.ZP,{component:function(p){return(0,d.jsx)(R,B()({},p))},notEmpty:{data:!1},initValues:f.jv})}),(0,d.jsx)(z.default,{onClick:h()(C()().mark(function M(){return C()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.t0=console,O.next=3,V.validateFields();case 3:return O.t1=O.sent,O.abrupt("return",O.t0.log.call(O.t0,O.t1));case 5:case"end":return O.stop()}},M)})),children:"\u63A7\u5236\u53F0\u67E5\u770B\u6570\u636E"})]})}},54914:function(Y,D,n){n.r(D);var K=n(57213),C=n.n(K),g=n(59419),h=n.n(g),I=n(84072),B=n(54306),x=n.n(B),A=n(90650),z=n.n(A),T=n(35031),U=n(50959),S=n(41566),b=n(67549),l=n(11527),W=function(t){var r=t.rowValues.input,E=t.disabled,o=t.rowKey,u=t.onChange;return(0,l.jsx)(T.default,{value:r,disabled:E,onChange:function(d){return u==null?void 0:u(o,{input:d.target.value})}})};D.default=function(){var c=(0,U.useState)(b.jN),t=x()(c,2),r=t[0],E=t[1];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(I.default,{message:"\u9002\u7528\u4E8E\u90E8\u5206\u6570\u636E\u7981\u7528\u4E14\u53EF\u4EE5\u7F16\u8F91\u5176\u4ED6\u6570\u636E\u3002\u5E38\u89C1\u4E1A\u52A1\u60C5\u666F\uFF1A\u4E0A\u4E00\u6B21\u4FDD\u5B58\u7684\u6570\u636E\u4E0D\u53EF\u4FEE\u6539\uFF0C\u4F46\u9700\u8981\u5728\u5F53\u524D\u57FA\u7840\u4E0A\u7EE7\u7EED\u65B0\u589E\u6570\u636E\u3002",style:{marginBottom:16}}),(0,l.jsx)(S.ZP,{component:function(u){return(0,l.jsx)(W,C()({},u))},value:r,onChange:function(u){return E(u)},initValues:b.jv})]})}},67549:function(Y,D,n){n.d(D,{AD:function(){return A},Bq:function(){return B},jN:function(){return x},jv:function(){return I}});var K=n(57213),C=n.n(K),g=n(50576),h=n.n(g),I={input:""},B={key:h()(),level:0,rowValues:C()({},I)},x={key:h()(),level:0,type:1,children:[{rowValues:{input:""},disabled:!0,key:h()(),level:1},{key:h()(),type:1,level:2,disabled:!0,children:[{rowValues:{input:""},key:h()(),level:2},{key:h()(),rowValues:{input:""},level:2}]}]},A={key:h()(),level:1,type:1,children:[{rowValues:{input:""},key:h()(),level:1},{key:h()(),type:2,level:2,children:[{key:h()(),level:2,rowValues:{input:""}},{key:h()(),rowValues:{input:""},level:2}]}]}},41566:function(Y,D,n){n.d(D,{de:function(){return d},NZ:function(){return R},ZP:function(){return V}});var K=n(57213),C=n.n(K),g=n(51317),h=n(96169),I=n(52510),B=n.n(I),x=n(50959),A=n(25043),z=n(50576),T=n.n(z),U=n(93525),S=n.n(U),b=n(55005),l=n(51695),W=n(84875),c=n.n(W),t=n(11527),r=32,E=16,o=new WeakMap,u=function(p){var O=p.value,_n=p.disabled,rn=p.maxLevel,X=p.maxSize,k=p.className,ln=p.style,an=p.component,en=p.onAddCondition,un=p.onDeleteCondition,dn=p.onChangeCondition,tn=p.onChangeRowValues,nn=function(_){return(_==null?void 0:_.type)&&[d.AND,d.OR].includes(_==null?void 0:_.type)},y=function J(_,$){var Z=$||!!_.disabled;if(!(_!=null&&_.children))return o.set(_,{height:r+E,lineHeight:r});_.children.map(function(G){return J(G,Z)});var N=!_.children.some(nn),L=nn(_.children[0]);if(Z){var j=_.children.reduce(function(G,q){return G+o.get(q).height},0),v,Q;if(N)v=j-r-E;else{var on,vn=_.children[0],En=_.children[_.children.length-1],cn=o.get(vn).height-w(_,!0),Dn=nn(En),mn=w(_,!1),hn=o.get(En).height-E-mn;Q=Dn?mn:r/2,v=cn+((on=_.children)===null||on===void 0?void 0:on.slice(1,-1).reduce(function(G,q){return G+o.get(q).height},0))+hn}o.set(_,{bottom:Q,lineHeight:v,height:j})}else{var P=_.children.reduce(function(G,q){return G+o.get(q).height},r),e;if(N){var s=o.get(_.children[0]).height-E,a=r;e=P-s/2-a/2}else{var m,i=L?o.get(_.children[0]).lineHeight/2+r/2:r/2+E;e=i+((m=_.children)===null||m===void 0?void 0:m.slice(1).reduce(function(G,q){return G+o.get(q).height},r/2))}o.set(_,{height:P,lineHeight:e})}return _},w=function J(_,$){var Z,N,L,P=$?_==null||(Z=_.children)===null||Z===void 0?void 0:Z[0]:_==null||(N=_.children)===null||N===void 0?void 0:N[(_==null||(L=_.children)===null||L===void 0?void 0:L.length)-1];if(!P)return r/2;var e=nn(P);if(e){var s;return((s=o.get(P))===null||s===void 0?void 0:s.lineHeight)/2+J(P,$)}return r/2},sn=function J(_,$,Z){var N,L=Z||!!_.disabled;if(_!=null&&(N=_.children)!==null&&N!==void 0&&N.length){var P,e=function(j){var v=S()($);return v.push.apply(v,["children",j]),v},s=o.get(_),a=s.lineHeight,m=s.bottom;return(0,t.jsxs)("div",{className:c()("dtc-ruleController__condition",{"dtc-ruleController__condition--active":_.children.length>1}),children:[(0,t.jsxs)("div",{className:c()("condition__box",{disabled:L}),style:{height:a,bottom:m!=null?m:E},children:[(0,t.jsx)("span",{className:c()("condition__box--name",{disabled:L}),onClick:function(){return!L&&dn(_.key,_==null?void 0:_.type)},children:R[_==null?void 0:_.type]}),_.children.length>1&&(0,t.jsx)("span",{className:c()("condition__box--line",{disabled:Z})})]}),_.children.map(function(i,j){return J(i,e(j),L)}),!L&&(0,t.jsxs)("div",{className:"condition__add",children:[(0,t.jsx)("span",{className:"condition__add--line"}),(0,t.jsx)(b.Z,{className:c()("condition__add--icon",(_==null||(P=_.children)===null||P===void 0?void 0:P.length)>=X&&"condition__add--icon--disabled"),onClick:function(){_!=null&&_.children&&_.children.length>=X||en({key:_.key,isOut:!0})}})]})]},_.key)}return(0,t.jsxs)("div",{className:"dtc-ruleController__item",children:[(O==null?void 0:O.children)&&(0,t.jsx)("span",{className:c()("dtc-ruleController__item--line",{disabled:Z})}),(0,t.jsx)("div",{className:"dtc-ruleController__item--component",children:an({rowKey:_.key,disabled:L,name:[].concat(S()($),["rowValues"]),rowValues:_.rowValues,onChange:tn})}),!L&&(0,t.jsxs)("div",{className:"dtc-ruleController__item--operation",children:[_.level===rn?null:(0,t.jsx)(b.Z,{className:"icon",onClick:function(){return en({key:_.key})}}),(0,t.jsx)(l.Z,{className:"icon",onClick:function(){return un(_.key)}})]})]},_.key)};return O?(y(O,!!_n),(0,t.jsx)("div",{className:c()("dtc-ruleController",k),style:ln,children:sn(O,[],!!_n||!!O.disabled)})):null},f,d=function(M){return M[M.AND=1]="AND",M[M.OR=2]="OR",M}({}),R=(f={},B()(f,d.AND,"\u4E14"),B()(f,d.OR,"\u6216"),f);function F(M){return M.disabled===!0}var H=function(p){var O=p.component,_n=p.disabled,rn=_n===void 0?!1:_n,X=p.value,k=!F(p)&&p,ln=k.maxLevel,an=ln===void 0?5:ln,en=k.maxSize,un=en===void 0?100:en,dn=k.notEmpty,tn=dn===void 0?{data:!0,message:"\u5FC5\u987B\u6709\u4E00\u6761\u6570\u636E"}:dn,nn=k.initValues,y=k.onChange,w=function P(e,s,a){var m,i=e;if(i.key===s)return i;if(!((m=i.children)!==null&&m!==void 0&&m.length))return null;for(var j=0;j<i.children.length;j++){var v=i.children[j];if(v.key===s)return a?v:i;var Q=P(v,s,a);if(Q)return Q}},sn=function(e){var s=(0,A.Z)(X),a=w(s,e.key,e.isOut);J(a,e,nn),y==null||y(s)},J=function(e,s,a){var m=s.key;if(s.isOut)return e.children.push(Object.assign({},{rowValues:a},{key:T()(),level:e.level}));var i=e==null?void 0:e.children;if(!i){var j={key:e.key,level:e.level+1,type:d.AND,children:[{rowValues:e.rowValues,key:T()(),level:(e==null?void 0:e.level)+1},{rowValues:a,key:T()(),level:(e==null?void 0:e.level)+1}]};delete e.rowValues,Object.assign(e,j);return}for(var v=0;v<i.length;v+=1)i[v].key===m&&(e==null?void 0:e.level)<=an&&(i[v]={key:i[v].key,type:d.AND,level:(e==null?void 0:e.level)+1,children:[Object.assign({},i[v],{key:T()(),level:(e==null?void 0:e.level)+1}),Object.assign({key:T()(),rowValues:a,level:(e==null?void 0:e.level)+1})]})},_=function(e){var s=(0,A.Z)(X),a=w(s,e,!1);if(tn.data&&!(a!=null&&a.children))return h.default.info(tn.message);if(!tn.data&&!(a!=null&&a.children))return y==null?void 0:y(void 0);$(a,e),y==null||y(s)},$=function(e,s){var a,m,i,j,v=e;if(v.children=(a=v)===null||a===void 0||(m=a.children)===null||m===void 0?void 0:m.filter(function(vn){return vn.key!==s}),((i=v)===null||i===void 0||(j=i.children)===null||j===void 0?void 0:j.length)===1){var Q=Z(v.children[0]),on=v.key;delete v.children,delete v.type,v=Object.assign(v,C()(C()({},Q),{},{key:on,level:Q.level}))}},Z=function P(e){var s;e.children&&(s=e.children.map(function(m){return P(m)}));var a=C()(C()({},e),{},{children:s,level:(e==null?void 0:e.level)-1});return a},N=function(e,s){var a=(0,A.Z)(X),m=w(a,e,!0);m.type=s===d.AND?d.OR:d.AND,y==null||y(a)},L=function(e,s){var a,m=(0,A.Z)(X),i=w(m,e,!0);i.rowValues=C()(C()({},(a=i.rowValues)!==null&&a!==void 0?a:{}),s),y==null||y(m)};return(0,t.jsx)(u,{maxLevel:an,maxSize:un,disabled:rn,value:X,component:O,onAddCondition:sn,onDeleteCondition:_,onChangeCondition:N,onChangeRowValues:L})},V=H}}]);
