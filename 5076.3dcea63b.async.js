"use strict";(self.webpackChunkdt_react_component=self.webpackChunkdt_react_component||[]).push([[5076],{76165:function(Pe,le,n){n.d(le,{NL:function(){return R},rJ:function(){return X},ri:function(){return Q},v0:function(){return e}});var v=n(12903),z=n.n(v),m=n(32810),se=n.n(m),ce=n(5677),N=n.n(ce),g=n(53874),X=function(a){return a[a.PENDING=0]="PENDING",a[a.GENERATING=1]="GENERATING",a[a.DONE=2]="DONE",a[a.STOPPED=3]="STOPPED",a}({}),Q=z()(function a(_){se()(this,a),N()(this,"id",void 0),N()(this,"assistantId",void 0),N()(this,"createdAt",void 0),N()(this,"title",void 0),N()(this,"prompts",void 0),N()(this,g.sc,!0),this.id=_.id,this.assistantId=_.assistantId,this.createdAt=_.createdAt||new Date().valueOf(),this.title=_.title,this.prompts=_.prompts||[]}),R=z()(function a(_){se()(this,a),N()(this,"id",void 0),N()(this,"assistantId",void 0),N()(this,"createdAt",void 0),N()(this,"title",void 0),N()(this,"messages",void 0),N()(this,g.sc,!0),this.id=_.id,this.assistantId=_.assistantId,this.createdAt=_.createdAt||new Date().valueOf(),this.title=_.title,this.messages=_.messages||[]}),e=z()(function a(_){var G,D;se()(this,a),N()(this,"id",void 0),N()(this,"assistantId",void 0),N()(this,"creator",void 0),N()(this,"createdAt",void 0),N()(this,"content",void 0),N()(this,"status",void 0),N()(this,g.sc,!0),this.id=_.id,this.creator=_.creator,this.assistantId=_.assistantId,this.createdAt=_.createdAt||new Date().valueOf(),this.content=(G=_.content)!==null&&G!==void 0?G:"",this.status=(D=_.status)!==null&&D!==void 0?D:X.PENDING})},25076:function(Pe,le,n){n.d(le,{Z:function(){return gn}});var v=n(79685),z=n(48651),m=n.n(z),se=n(90554),ce=n(28870),N=n(38046),g=n.n(N),X=n(94046),Q=n(68591),R=n.n(Q),e=n(63342),a=["type","className","children"],_="dtc__aigc__button__global-gradient",G="secondary_linear_gradient",D="secondary_linear_gradient_hover";function q(t){var r=t.type,l=r===void 0?"default":r,u=t.className,o=t.children,h=g()(t,a);return(0,v.useEffect)(function(){if(!document.querySelector(".".concat(_))){var y=document.createElement("div");y.style.setProperty("width","0"),y.style.setProperty("height","0"),y.className=_,y.innerHTML=(0,X.Dq)((0,e.jsx)("svg",{width:0,height:0,children:(0,e.jsxs)("defs",{children:[(0,e.jsxs)("linearGradient",{id:G,x1:"1.18164",y1:"3.93164",x2:"13.9881",y2:"8.54198",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]}),(0,e.jsxs)("linearGradient",{id:D,x1:"8.96582",y1:"0.96582",x2:"15.9711",y2:"3.4877",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})]})})),document.body.appendChild(y)}},[]),(0,e.jsx)(ce.default,m()(m()({className:R()("dtc__aigc__button",u,"dtc__aigc__button--".concat(l)),ghost:!0},h),{},{children:(0,e.jsx)("span",{className:"dtc__aigc__button__text",children:o})}))}var me=n(81930),L=n(45217),ee=n(9392),$=["lineNumberStyle"];function f(t){var r=t.className,l=t.style,u=t.toolbars,o=t.copy,h=t.convert,y=t.children,I=t.options,F=I===void 0?{}:I,M=F.lineNumberStyle,S=M===void 0?{}:M,H=g()(F,$),Z=(0,v.useMemo)(function(){var pe=y[0],ve=/language-(\w+)/.exec(pe.props.className||""),xe=ve?ve[1]:"SQL",ge=String(pe.props.children).replace(/\n$/,"");return{value:ge,language:xe}},[y]),x=Z.value,W=Z.language,k=(0,v.useMemo)(function(){return typeof o=="boolean"?{disabled:!o,options:{}}:{disabled:!1,options:m()({},o||{})}},[o]),_e=x||"";return(0,e.jsxs)("div",{className:R()("dtc__aigc__codeblock",h&&"dtc__aigc__codeblock--convert",r),style:l,children:[(0,e.jsxs)("div",{className:"dtc__aigc__codeblock__header",children:[(0,e.jsx)("span",{className:"dtc__aigc__codeblock__language",children:W.toLocaleLowerCase()}),(0,e.jsxs)("div",{className:"dtc__aigc__codeblock__tool",children:[!k.disabled&&(0,e.jsx)(ee.Z,m()({text:_e},k.options)),typeof u=="function"?u():u]})]}),(0,e.jsx)(me.Z,m()(m()({language:W.toLocaleLowerCase(),wrapLines:!0,style:m()(m()({},L.Yn),{},{'code[class*="language-"]':m()(m()({},L.Yn['code[class*="language-"]']),{},{background:h?"#F9F9FA":"#fff"}),'pre[class*="language-"]':m()(m()({},L.Yn['pre[class*="language-"]']),{},{background:h?"#F9F9FA":"#fff",margin:0,overflow:"auto",maxHeight:270,borderRadius:"0 0 4px 4px"})}),lineNumberStyle:m()({fontStyle:"normal"},S),showLineNumbers:!0},H),{},{children:_e}))]})}var b=n(86516),j=n.n(b),E=n(76165),U=n(88289),V=n(4125),ne=n(80244),J=n(59058),O=n(71074),he=n(58351);function T(t){return t.loading?(0,e.jsxs)("div",{className:"dtc__aigc__loading",children:[(0,e.jsx)("div",{}),(0,e.jsx)("div",{}),(0,e.jsx)("div",{})]}):(0,e.jsx)(e.Fragment,{children:t.children})}var oe=n(70300),te=n.n(oe),ue=n(50459),ye=n(71877),be=n(63949),Fe=["typing","className","rehypePlugins","remarkPlugins","codeBlock","components","children","onMount"],We=["src"],Oe=(0,v.memo)(function(r){var l=r.typing,u=r.className,o=r.rehypePlugins,h=o===void 0?[]:o,y=r.remarkPlugins,I=y===void 0?[]:y,F=r.codeBlock,M=r.components,S=r.children,H=r.onMount,Z=g()(r,Fe);return(0,v.useEffect)(function(){H==null||H()},[]),(0,e.jsx)(ue.D,m()(m()({className:R()("dtc__aigc__markdown",l&&"dtc__aigc__markdown--blink",u),rehypePlugins:h,remarkPlugins:[ye.Z].concat(te()(I)),components:m()({code:function(W){var k=W.children;return(0,e.jsx)("code",{className:"dtc__aigc__markdown__inlineCode",children:k})},pre:function(W){var k=W.children;return(0,e.jsx)(f,m()(m()({},F),{},{children:k}))},hr:function(){return(0,e.jsx)("hr",{color:"#ebecf0",className:"dtc__aigc__markdown__hr"})},p:function(W){return W.node.children.every(function(k){return k.type==="text"})?(0,e.jsx)("p",{children:W.children}):(0,e.jsx)("div",{children:W.children})},img:function(W){var k=W.src,_e=g()(W,We);return(0,e.jsx)(be.Z,m()({className:"dtc__aigc__markdown__img",src:k},_e))}},M),includeElementIndex:!0},Z),{},{children:S}))},function(t,r){return!(t.typing!==r.typing||t.className!==r.className||t.children!==r.children||t.codeBlock!==r.codeBlock)});function Se(t){var r=t.current,l=t.total,u=t.onChange,o=t.style,h=t.disabled,y=r===1||h,I=r===l||h;return(0,e.jsxs)("div",{className:"dtc-aigc-pagination",style:o,children:[(0,e.jsx)(O.LeftOutlined,{className:y?"arrow-disabled":"",onClick:function(){y||u(r-1)},"data-testid":"icon-left"}),(0,e.jsxs)("section",{children:[(0,e.jsx)("span",{children:r}),(0,e.jsx)("span",{children:"/"}),(0,e.jsx)("span",{children:l})]}),(0,e.jsx)(O.RightOutlined,{className:I?"arrow-disabled":"",onClick:function(){I||u(r+1)},"data-testid":"icon-right"})]})}var Be=v.createContext({chat:void 0,maxRegenerateCount:5});function Re(){return v.useContext(Be)}var we=["formatText"];function Le(t){var r=t.prompt,l=t.data,u=t.regenerate,o=t.copy,h=t.onRegenerate,y=t.onStop,I=t.onLazyRendered,F=(0,he.Z)(fe),M=Re(),S=M.components,H=S===void 0?{}:S,Z=M.messageIcons,x=M.codeBlock,W=M.rehypePlugins,k=M.remarkPlugins,_e=(0,v.useState)(!1),pe=j()(_e,2),ve=pe[0],xe=pe[1],ge=(0,v.useRef)(function(){});function fe(B){var de=j()(B,1),Ce=de[0];Ce.isIntersecting&&xe(function(je){if(!je){var Ie=function(){return new Promise(function(hn){ge.current=hn})};I==null||I(Ie)}return!0})}var Y=(0,v.useState)(l.length),K=j()(Y,2),re=K[0],w=K[1],P=l[re-1],c=(0,v.useMemo)(function(){return P?[P.status===E.rJ.GENERATING,P.status===E.rJ.PENDING,P.status===E.rJ.STOPPED]:[!1,!1,!1]},[P]),s=j()(c,3),d=s[0],i=s[1],p=s[2];(0,v.useEffect)(function(){w(l.length)},[l.length]);var C=(0,v.useMemo)(function(){return Object.keys(H).reduce(function(B,de){var Ce=H[de];return B[de]=function(){for(var je=arguments.length,Ie=new Array(je),Ee=0;Ee<je;Ee++)Ie[Ee]=arguments[Ee];return typeof Ce=="function"?Ce.apply(void 0,Ie.concat([{messageId:P==null?void 0:P.id,promptId:r.id}])):Ce},B},{})},[H,P==null?void 0:P.id]),A=(0,v.useMemo)(function(){return typeof o=="boolean"?{disabled:!o,options:{}}:{disabled:!1,options:m()({},o||{})}},[o]),ie=function(){var de;if(A.disabled)return null;var Ce=A.options,je=Ce.formatText,Ie=g()(Ce,we),Ee=(de=je==null?void 0:je(P==null?void 0:P.content))!==null&&de!==void 0?de:P==null?void 0:P.content;return Ee?(0,e.jsx)(ee.Z,m()({className:"dtc__message__icon",button:(0,e.jsx)(O.CopyOutlined,{}),text:Ee},Ie)):null};return(0,e.jsxs)("section",{className:"dtc__message__container",children:[(0,e.jsx)("div",{className:"dtc__message__avatar",children:(0,e.jsx)(O.AiAvatarColored,{})}),(0,e.jsxs)("div",{className:"dtc__message__wrapper",children:[(0,e.jsxs)("div",{className:R()("dtc__message__content",i&&"dtc__message__content--loading"),ref:F,children:[(0,e.jsx)(T,{loading:i,children:ve&&(0,e.jsx)(Oe,{typing:d,components:C,codeBlock:x,rehypePlugins:W,remarkPlugins:k,onMount:function(){ge.current()},children:P==null?void 0:P.content})}),(0,e.jsxs)("div",{className:"dtc__message__footer",children:[l.length>1&&!d&&!i&&(0,e.jsx)(Se,{current:re,total:l.length,onChange:function(de){return w(de)}}),p&&(0,e.jsx)("span",{className:"dtc__message__stopText",children:"\u56DE\u7B54\u5DF2\u505C\u6B62"})]})]}),(d||i)&&(0,e.jsx)("div",{className:"dtc__message__extra",children:(0,e.jsx)(ce.default,{type:"link",className:"dtc__message__stopBtn",onClick:function(){return y==null?void 0:y(P)},icon:(0,e.jsx)(O.PauseOutlined,{style:{verticalAlign:"sub"}}),children:"\u505C\u6B62\u56DE\u7B54"})})]}),!d&&!i&&(0,e.jsxs)(V.default,{className:"dtc__message__iconGroup",align:"center",children:[ie(),typeof Z=="function"?Z(P,r):Z,u&&(0,e.jsx)(J.default,{title:"\u91CD\u65B0\u751F\u6210",getTooltipContainer:function(de){return de.parentNode},children:(0,e.jsx)("span",{className:"dtc__message__icon",onClick:function(){return h==null?void 0:h(P)},children:(0,e.jsx)(O.ReloadOutlined,{})})})]})]})}function $e(t){var r=t.data,l=t.className,u=Re(),o=u.components,h=o===void 0?{}:o,y=u.codeBlock,I=(0,v.useMemo)(function(){return Object.keys(h).reduce(function(F,M){var S=h[M];return F[M]=function(){for(var H=arguments.length,Z=new Array(H),x=0;x<H;x++)Z[x]=arguments[x];return typeof S=="function"?S.apply(void 0,Z.concat([{promptId:r==null?void 0:r.id}])):S},F},{})},[h,r==null?void 0:r.id]);return r!=null&&r.title?(0,e.jsx)("section",{className:R()("dtc__prompt__container",l),children:(0,e.jsx)("div",{className:"dtc__prompt__wrapper",children:(0,e.jsx)("div",{className:"dtc__prompt__content",children:(0,e.jsx)(Oe,{codeBlock:y,components:I,children:(r==null?void 0:r.title)||""})})})}):null}var Ge=(0,v.forwardRef)(function(t,r){var l,u=t.data,o=t.placeholder,h=t.scrollable,y=h===void 0?!0:h,I=t.onRegenerate,F=t.onStop,M=Re(),S=M.maxRegenerateCount,H=M.copy,Z=M.regenerate,x=(0,v.useRef)(null),W=(0,v.useState)(!0),k=j()(W,2),_e=k[0],pe=k[1],ve=(0,v.useRef)(0);(0,v.useImperativeHandle)(r,function(){return{nativeElement:x.current,scrollToBottom:function(){ve.current=window.requestAnimationFrame(function(){var re,w;(re=x.current)===null||re===void 0||re.scrollTo({top:(w=x.current)===null||w===void 0?void 0:w.scrollHeight,left:0,behavior:"instant"})})}}});var xe=function(){if(!x.current)return!1;var re=5,w=x.current,P=w.scrollTop,c=w.clientHeight,s=w.scrollHeight;return P+c>=s-re},ge=!!(Array.isArray(u)&&u.length),fe=u[u.length-1],Y=ge?(l=fe.messages)===null||l===void 0?void 0:l[fe.messages.length-1]:void 0;return(0,v.useLayoutEffect)(function(){var K,re=function(){x.current&&pe(xe())};return(K=x.current)===null||K===void 0||K.addEventListener("scroll",re),function(){var w;(w=x.current)===null||w===void 0||w.removeEventListener("scroll",re),window.cancelAnimationFrame(ve.current)}},[]),(0,v.useLayoutEffect)(function(){ve.current=window.requestAnimationFrame(function(){x.current&&(ge?x.current.scrollTop=x.current.scrollHeight:x.current.scrollTop=0)})},[Y==null?void 0:Y.id]),(0,v.useLayoutEffect)(function(){ve.current=window.requestAnimationFrame(function(){x.current&&(Y==null?void 0:Y.status)===E.rJ.GENERATING&&_e&&(x.current.scrollTop=x.current.scrollHeight)})},[Y==null?void 0:Y.status,Y==null?void 0:Y.content,_e]),(0,e.jsx)("div",{className:R()("dtc__aigc__content__container",!y&&"dtc__aigc__content__container--disabled"),ref:x,children:ge?(0,e.jsx)("div",{className:"dtc__aigc__content__inner__holder",children:u.map(function(K,re){var w=re===u.length-1&&K.messages.length<S;return(0,e.jsxs)(v.Fragment,{children:[(0,e.jsx)($e,{data:K}),(0,e.jsx)(Le,{prompt:K,data:K.messages,regenerate:typeof Z=="function"?Z(K,re,u):Z!=null?Z:w,copy:H,onRegenerate:function(c){return I==null?void 0:I(c,K)},onStop:function(c){return F==null?void 0:F(c,K)},onLazyRendered:function(c){var s=xe();c().then(function(){window.requestAnimationFrame(function(){pe(s),s&&x.current&&(x.current.scrollTop=x.current.scrollHeight)})})}})]},K.id)})}):(0,e.jsx)(v.Fragment,{children:o})})}),Ke=Ge,yn=n(83345),Ze=n(50425),ze=["className"],Je=["className"];function He(t){var r=t.className,l=g()(t,ze);return(0,e.jsx)("span",m()(m()({className:R()("dtc__icon",r)},l),{},{children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",children:[(0,e.jsx)("path",{fill:"url(#paint0_linear_3878_6538)",fillRule:"evenodd",d:"M17.999 3.858 3.35 9.204a1.66 1.66 0 0 0-1.095 1.458 1.66 1.66 0 0 0 .862 1.602l4.454 2.44c.27.143.593.098.808-.118l.737-.72 4.508-4.428a.677.677 0 0 1 .952.018c.26.261.26.693-.009.954l-4.562 4.473-.61.603a.68.68 0 0 0-.118.828l2.64 4.626c.315.513.845.81 1.429.81.063 0 .117 0 .18-.009a1.68 1.68 0 0 0 1.41-1.107L20.153 6a1.69 1.69 0 0 0-.404-1.764 1.64 1.64 0 0 0-1.751-.378",clipRule:"evenodd"}),(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"paint0_linear_3878_6538",x1:"2.25",x2:"23.921",y1:"3.75",y2:"11.552",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})}),(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"paint0_linear_3878_6538_hover",x1:"2.25",x2:"23.921",y1:"3.75",y2:"11.552",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#08C4FF"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#4892FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#8A61FF"})]})})]})}))}var Ve=function(r){var l=r.className,u=g()(r,Je);return(0,e.jsx)("span",m()(m()({className:R()("dtc__icon",l)},u),{},{children:(0,e.jsxs)("svg",{width:"1em",height:"1em",viewBox:"0 0 6 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,e.jsx)("path",{d:"M0 3C0 1.34315 1.34315 0 3 0C4.65685 0 6 1.34315 6 3C6 4.65685 4.65685 6 3 6C1.34315 6 0 4.65685 0 3Z",fill:"url(#paint0_linear_5253_12831)"}),(0,e.jsx)("circle",{cx:"3",cy:"3",r:"3",fill:"url(#paint1_linear_5253_12831)"}),(0,e.jsxs)("defs",{children:[(0,e.jsxs)("linearGradient",{id:"paint0_linear_5253_12831",x1:"0",y1:"0",x2:"7.2238",y2:"2.60057",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#08C4FF"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#4892FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#8A61FF"})]}),(0,e.jsxs)("linearGradient",{id:"paint1_linear_5253_12831",x1:"0",y1:"0",x2:"7.2238",y2:"2.60057",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#08C4FF"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#4892FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#8A61FF"})]})]})]})}))},ke=["onChange","onPressEnter","onPressShiftEnter","onSubmit","button","className"];function Ye(t){var r=t.onChange,l=t.onPressEnter,u=t.onPressShiftEnter,o=t.onSubmit,h=t.button,y=t.className,I=g()(t,ke),F=function(S){r==null||r(S.target.value)};return(0,e.jsxs)("div",{className:"dtc__chat__textarea__container",children:[(0,e.jsx)(Ze.default.TextArea,m()(m()({className:R()("dtc__chat__textarea",y)},I),{},{onChange:F,onPressEnter:function(S){S.persist(),S.preventDefault(),S.shiftKey?(r==null||r(I.value+`
`),u==null||u(S)):l==null||l(S)},autoSize:{minRows:2,maxRows:7}})),h!=null&&h.disabled?(0,e.jsx)(O.SendFilled,{disabled:!0,className:"dtc__chat__textarea__send"}):(0,e.jsx)(He,{className:R()("dtc__chat__textarea__send"),onClick:function(){return o==null?void 0:o(I.value)}})]})}var Xe=["className","children"],Qe=function(r){var l=r.className,u=r.children,o=g()(r,Xe);return(0,e.jsxs)("div",m()(m()({className:R()("dtc__tag",l)},o),{},{children:[(0,e.jsx)(Ve,{className:"dtc__tag__icon"}),u]}))},qe=Qe,en=n(22786),Ue=n.n(en),nn=n(46299),tn=n.n(nn),rn=n(12903),Te=n.n(rn),on=n(32810),Ae=n.n(on),sn=n(89822),De=n.n(sn),an=n(38832),Me=n.n(an),Ne=n(53874),ln=n(18411),cn=function(t){De()(l,t);var r=Me()(l);function l(){return Ae()(this,l),r.apply(this,arguments)}return Te()(l)}(E.ri),un=function(t){De()(l,t);var r=Me()(l);function l(){return Ae()(this,l),r.apply(this,arguments)}return Te()(l)}(E.NL),dn=function(t){De()(l,t);var r=Me()(l);function l(){return Ae()(this,l),r.apply(this,arguments)}return Te()(l)}(E.v0),mn=function(r){return(r+1)%1e6};function _n(t){var r=(0,v.useReducer)(mn,0),l=j()(r,2),u=l[1],o=(0,v.useRef)(void 0),h=(0,ln.Z)({onTyping:function(s){fe(y.current.promptId,y.current.messageId,{content:s})}}),y=(0,v.useRef)({promptId:"",messageId:""}),I=(0,v.useRef)(!1);function F(c,s){h.start(),fe(c,s,{status:E.rJ.PENDING}),y.current={promptId:c,messageId:s}}function M(c,s,d){if(c===y.current.promptId&&s===y.current.messageId){var i;h.push(d),((i=Y(c,s))===null||i===void 0?void 0:i.status)!==E.rJ.GENERATING&&fe(c,s,{status:E.rJ.GENERATING})}}function S(c,s){I.current=!0,h.close().then(function(){I.current=!1,fe(c,s,{status:E.rJ.DONE})})}function H(c){var s,d=(t==null||(s=t.ctor)===null||s===void 0?void 0:s.Conversation)||cn;o.current=new d(c),u()}function Z(){o.current=void 0,u()}function x(c){o.current&&(o.current=(0,Ne.Uy)(o.current,function(s){Object.assign(s,c)}),u())}function W(){return o.current}function k(){for(var c,s=arguments.length,d=new Array(s),i=0;i<s;i++)d[i]=arguments[i];if(o.current){var p=(t==null||(c=t.ctor)===null||c===void 0?void 0:c.Prompt)||un;o.current=(0,Ne.Uy)(o.current,function(C){var A;(A=C.prompts)===null||A===void 0||A.push(new p(d[0]))}),u()}}function _e(c){o.current&&(o.current=(0,Ne.Uy)(o.current,function(s){var d,i,p=(d=s.prompts)===null||d===void 0?void 0:d.findIndex(function(C){return C.id===c});p!==-1&&((i=s.prompts)===null||i===void 0||i.splice(p,1))}),u())}function pe(c,s){o.current&&(o.current=(0,Ne.Uy)(o.current,function(d){var i=d.prompts.find(function(p){return p.id===c});i&&(typeof s=="function"?Object.assign(i,s(i)):Object.assign(i,s))}),u())}function ve(c){var s,d;return(s=o.current)===null||s===void 0||(d=s.prompts)===null||d===void 0?void 0:d.find(function(i){return typeof c=="function"?c(i):i.id===c})}function xe(c){for(var s,d=arguments.length,i=new Array(d>1?d-1:0),p=1;p<d;p++)i[p-1]=arguments[p];if(o.current){var C=(t==null||(s=t.ctor)===null||s===void 0?void 0:s.Message)||dn;o.current=(0,Ne.Uy)(o.current,function(A){var ie=A.prompts.find(function(B){return B.id===c});ie&&ie.messages.push(new C(i[0]))}),u()}}function ge(c,s){o.current&&(o.current=(0,Ne.Uy)(o.current,function(d){var i,p,C=d.prompts.find(function(ie){return ie.id===c});if(C){var A=(i=C.messages)===null||i===void 0?void 0:i.findIndex(function(ie){return ie.id===s});A!==-1&&((p=C.messages)===null||p===void 0||p.splice(A,1))}}),u())}function fe(c,s,d,i){o.current&&(o.current=(0,Ne.Uy)(o.current,function(p){var C,A=p.prompts.find(function(B){return B.id===c}),ie=A==null||(C=A.messages)===null||C===void 0?void 0:C.find(function(B){return B.id===s});ie&&(typeof d=="function"?Object.assign(ie,d(ie)):Object.assign(ie,d))}),i!==!1&&u())}function Y(c,s){var d,i,p,C;return(d=o.current)===null||d===void 0||(i=d.prompts)===null||i===void 0||(p=i.find(function(A){return A.id===c}))===null||p===void 0||(C=p.messages)===null||C===void 0?void 0:C.find(function(A){return A.id===s})}function K(){var c,s,d,i,p=(c=o.current)===null||c===void 0||(s=c.prompts)===null||s===void 0?void 0:s[((d=o.current)===null||d===void 0?void 0:d.prompts.length)-1],C=p==null||(i=p.messages)===null||i===void 0?void 0:i[p.messages.length-1];return C?C.status===E.rJ.PENDING||C.status===E.rJ.GENERATING:!1}function re(){return w.apply(this,arguments)}function w(){return w=tn()(Ue()().mark(function c(){var s,d,i,p,C,A;return Ue()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(C=(s=o.current)===null||s===void 0||(d=s.prompts)===null||d===void 0?void 0:d[((i=o.current)===null||i===void 0?void 0:i.prompts.length)-1],A=C==null||(p=C.messages)===null||p===void 0?void 0:p[C.messages.length-1],(A==null?void 0:A.status)!==E.rJ.GENERATING){B.next=8;break}return B.next=5,h.close(!0);case 5:I.current&&fe(C.id,A.id,{status:E.rJ.DONE}),B.next=9;break;case 8:h.stop();case 9:return B.abrupt("return",W());case 10:case"end":return B.stop()}},c)})),w.apply(this,arguments)}function P(c){if(o.current=c,I.current=!1,K()){var s,d,i=W(),p=i==null||(s=i.prompts)===null||s===void 0?void 0:s[(i==null?void 0:i.prompts.length)-1],C=p==null||(d=p.messages)===null||d===void 0?void 0:d[p.messages.length-1];if(!p||!C)return o.current;h.start(C.content),y.current={promptId:p.id,messageId:C.id}}return u(),o.current}return{conversation:{create:H,remove:Z,update:x,get:W},prompt:{create:k,remove:_e,update:pe,get:ve},message:{create:xe,remove:ge,update:fe,get:Y},loading:K,start:F,push:M,close:S,stop:h.stop,isTyping:h.isTyping,saveViewState:re,restoreViewState:P}}var vn=n(80070);function fn(t){var r=t.icon,l=r===void 0?(0,e.jsx)(O.AiAvatarColored,{style:{fontSize:24}}):r,u=t.title,o=t.description,h=t.className,y=t.style;return(0,e.jsx)("div",{className:R()("dtc__welcome",h),style:y,children:(0,e.jsxs)("div",{className:"dtc__welcome__content",children:[(0,e.jsxs)(vn.Z,{gap:8,align:"center",children:[l,(0,e.jsx)("span",{className:"dtc__welcome__title",children:u})]}),(0,e.jsx)("div",{className:"dtc__welcome__description",children:o})]})})}var pn=5;function ae(t){var r=t.chat,l=t.components,u=t.maxRegenerateCount,o=u===void 0?pn:u,h=t.regenerate,y=t.copy,I=t.codeBlock,F=t.messageIcons,M=t.rehypePlugins,S=t.remarkPlugins,H=t.children;return(0,e.jsx)(Be.Provider,{value:{chat:r,components:l,maxRegenerateCount:o,copy:y,codeBlock:I,messageIcons:F,regenerate:h,rehypePlugins:M,remarkPlugins:S},children:H})}ae.useChat=_n,ae.useContext=Re,ae.Loading=T,ae.Button=q,ae.CodeBlock=f,ae.Input=Ye,ae.Markdown=Oe,ae.Pagination=Se,ae.Message=Le,ae.Prompt=$e,ae.Content=Ke,ae.Tag=qe,ae.Welcome=fn;var gn=ae},9392:function(Pe,le,n){n.d(le,{Z:function(){return q}});var v=n(48651),z=n.n(v),m=n(80244),se=n(59058),ce=n(71089),N=n(75020),g=n(79685),X=n(29520),Q=n(71074),R=n(68591),e=n.n(R),a=n(63062),_=n(50475),G=n(63342),D=function(L){var ee=(0,a.Z)("Copy"),$=L.button,f=$===void 0?(0,G.jsx)(Q.CopyOutlined,{className:"dtc-copy__default-icon"}):$,b=L.text,j=L.tooltip,E=j===void 0?ee.copy:j,U=L.style,V=L.className,ne=L.disabled,J=ne===void 0?!1:ne,O=L.onCopy,he=O===void 0?function(){return N.default.success(ee.copied)}:O,T=function(){J||new X.X0().copy(b,function(){return he(b)})},oe=function(){return(0,G.jsx)("span",{className:e()(["dtc-copy",{"dtc-copy--disabled":J},V]),style:U,onClick:function(){return T()},children:f})},te=(0,_.Z)(E);return(0,G.jsx)(se.default,z()(z()({},te),{},{children:oe()}))},q=D},80070:function(Pe,le,n){n.d(le,{Z:function(){return R}});var v=n(48651),z=n.n(v),m=n(38046),se=n.n(m),ce=n(79685),N=n(68591),g=n.n(N),X=n(63342),Q=["className","vertical","wrap","justify","align","flex","gap","style","children"],R=(0,ce.forwardRef)(function(a,_){var G=a.className,D=a.vertical,q=D===void 0?!1:D,me=a.wrap,L=me===void 0?"nowrap":me,ee=a.justify,$=ee===void 0?"normal":ee,f=a.align,b=f===void 0?"normal":f,j=a.flex,E=j===void 0?"normal":j,U=a.gap,V=U===void 0?0:U,ne=a.style,J=a.children,O=se()(a,Q);return(0,X.jsx)("section",z()(z()({className:g()("dtc-flex",G,q&&"dtc-flex__vertical"),style:z()({flexWrap:L,justifyContent:$,alignItems:b,flex:E,gap:V},ne),ref:_},O),{},{children:J}))})},63949:function(Pe,le,n){var v=n(16842),z=n.n(v),m=n(81901),se=n(38046),ce=n.n(se),N=n(48651),g=n.n(N),X=n(86516),Q=n.n(X),R=n(79685),e=n(58351),a=n(63342),_=["src","className","style"],G=["src","className","style","loader"];function D($){return new Promise(function(f,b){var j=new Image;j.onload=function(){return f(!0)},j.onerror=b,j.src=$})}function q($){var f=$.src,b=R.useState(!0),j=Q()(b,2),E=j[0],U=j[1],V=R.useState(void 0),ne=Q()(V,2),J=ne[0],O=ne[1];return R.useEffect(function(){D(f).then(function(){U(!1),O(f)}).finally(function(){U(!1)})},[f]),{isLoading:E,src:J}}var me=function(f){var b=f.lazy;return b?(0,a.jsx)(L,g()({},f)):(0,a.jsx)(ee,g()({},f))},L=function(f){var b=f.src,j=f.className,E=f.style,U=ce()(f,_),V=(0,e.Z)(function(ne){var J=Q()(ne,1),O=J[0],he=O.target,T=O.isIntersecting;if(T){var oe,te=he;te.src=(oe=te.dataset.src)!==null&&oe!==void 0?oe:"",te.onload=function(){te.style.opacity="1"}}});return(0,a.jsx)("img",g()(g()({className:j,style:E,ref:V},U),{},{"data-src":b}))},ee=function(f){var b=f.src,j=f.className,E=f.style,U=f.loader,V=U===void 0?(0,a.jsx)(m.default,{spinning:!0}):U,ne=ce()(f,G),J=q({src:b}),O=J.src,he=J.isLoading;return O?(0,a.jsx)("img",g()(g()({},ne),{},{className:j,style:E,src:O})):he?V:null};le.Z=me},58351:function(Pe,le,n){var v=n(86516),z=n.n(v),m=n(79685),se=function(N){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X=(0,m.useRef)(null),Q=g.threshold,R=Q===void 0?0:Q,e=g.root,a=e===void 0?null:e,_=g.rootMargin,G=_===void 0?"0%":_,D=g.freezeOnceVisible,q=D===void 0?!1:D,me=(0,m.useState)(),L=z()(me,2),ee=L[0],$=L[1],f=(ee==null?void 0:ee.isIntersecting)&&q,b=function(E,U){$(E[0]),N(E,U)};return(0,m.useEffect)(function(){var j=X.current,E=!!window.IntersectionObserver;if(!(f||!j)){if(!E){var U,V,ne={boundingClientRect:(U=j.getBoundingClientRect())!==null&&U!==void 0?U:null,intersectionRatio:1,intersectionRect:(V=j.getBoundingClientRect())!==null&&V!==void 0?V:null,isIntersecting:!0,rootBounds:null,target:j,time:Date.now()};b([ne],null)}var J=new IntersectionObserver(b,{threshold:R,root:a,rootMargin:G});return J.observe(j),function(){return J.disconnect()}}},[JSON.stringify(R),a,G,f]),X};le.Z=se},18411:function(Pe,le,n){n.d(le,{Z:function(){return Q}});var v=n(22786),z=n.n(v),m=n(46299),se=n.n(m),ce=n(86516),N=n.n(ce),g=n(79685),X=50;function Q(R){var e=R.onTyping,a=(0,g.useRef)(),_=(0,g.useRef)(""),G=(0,g.useRef)(1),D=(0,g.useRef)(0),q=(0,g.useRef)(!1),me=(0,g.useState)(!1),L=N()(me,2),ee=L[0],$=L[1],f=(0,g.useRef)(!1),b=(0,g.useRef)(0);function j(){var T=_.current.length-D.current-1,oe=1e3/X;G.current=Math.ceil(T/oe)}function E(){var T=_.current.slice(D.current),oe=T.slice(0,G.current),te=/<[a-zA-Z]{0,4}\s[^<]*>/;if(te.test(T)&&!te.test(oe)){var ue=T.match(te),ye=ue[0],be=T.indexOf(ye);return D.current+be+ye.length}return D.current+G.current}function U(){a.current||(a.current=window.setInterval(function(){if(D.current<_.current.length){var T=_.current,oe=E(),te=T.slice(0,oe);e(te),D.current=te.length}else q.current||(window.clearInterval(a.current),a.current=0,$(!1),f.current=!1)},X))}(0,g.useEffect)(function(){return function(){window.clearInterval(a.current),window.clearInterval(b.current),a.current=0}},[]);function V(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";q.current=!0,$(!0),window.clearInterval(a.current),a.current=0,_.current=T,D.current=T.length}function ne(T){q.current&&(T.startsWith("n")&&_.current.endsWith("\\")?_.current=_.current.slice(0,-1)+`
`+T.slice(1).replace(/\\n/g,`
`):_.current+=T.replace(/\\n/g,`
`),j(),U())}function J(T){return O.apply(this,arguments)}function O(){return O=se()(z()().mark(function T(oe){return z()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(!oe){ue.next=10;break}window.clearInterval(b.current),window.clearInterval(a.current),a.current=0,e(_.current),$(!1),f.current=!1,q.current=!1,ue.next=14;break;case 10:return q.current=!1,f.current=!0,window.clearInterval(b.current),ue.abrupt("return",new Promise(function(ye){a.current?b.current=window.setInterval(function(){f.current||(ye(),f.current=!0,window.clearInterval(b.current))},1e3):(ye(),f.current=!1,$(!1),window.clearInterval(b.current))}));case 14:case"end":return ue.stop()}},T)})),O.apply(this,arguments)}function he(){q.current=!1,$(!1),f.current=!1,a.current&&(window.clearInterval(a.current),a.current=0),_.current="",D.current=0}return{start:V,push:ne,close:J,stop:he,isTyping:ee}}}}]);
